<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Falc√µes App - Entregas e Mobilidade</title>

    <meta name="description" content="Pe√ßa sua corrida ou entrega agora com a agilidade dos Falc√µes.">
    <meta property="og:title" content="Falc√µes App - R√°pido e Seguro">
    <meta property="og:image" content="https://falcoes.site/assets/logo.png">

    <link rel="icon" type="image/png" href="assets/logo.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        
    
        :root {
            --bg-color: #121212; --card-color: #1e1e1e; --neon-green: #00e640;
            --text-color: #ffffff; --input-bg: #2c2c2c; --border-color: #333;
            --danger-color: #ff4444; --warning-color: #ffcc00;
        }

        body { 
            font-family: 'Segoe UI', Roboto, sans-serif; background-color: var(--bg-color); color: var(--text-color);
            display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; padding: 20px; box-sizing: border-box;
        }

        .login-container { 
            background: var(--card-color); padding: 40px 30px; border-radius: 20px; width: 100%; max-width: 350px; 
            border: 1px solid var(--border-color); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); text-align: center;
        }

        .logo-area img { max-height: 90px; filter: drop-shadow(0 0 8px rgba(0,230,64,0.4)); margin-bottom: 15px; }
        h2 { color: var(--neon-green); text-transform: uppercase; margin-bottom: 25px; font-weight: 800; letter-spacing: 1px; font-size: 22px;}

        /* Grupo de Input com √çcone */
        .input-group {
            position: relative;
            margin-bottom: 15px;
            text-align: left;
        }

        .input-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
            transition: 0.3s;
        }

        .input-group input { 
            width: 100%; padding: 14px 14px 14px 45px; background-color: var(--input-bg); border: 1px solid var(--border-color);
            color: white; border-radius: 10px; box-sizing: border-box; font-size: 15px; transition: 0.3s;
        }

        /* Efeito de Foco Neon */
        .input-group input:focus { 
            border-color: var(--neon-green); outline: none; 
            box-shadow: 0 0 12px rgba(0, 230, 64, 0.2); 
            background-color: #333;
        }

        .input-group input:focus + i { color: var(--neon-green); }

        /* Bot√£o de Ver Senha */
        .toggle-password {
            position: absolute;
            right: 15px;
            left: auto !important; /* Sobrescreve o left do √≠cone padr√£o */
            cursor: pointer;
            color: #777 !important;
        }
        .toggle-password:hover { color: var(--neon-green) !important; }

        button { 
            width: 100%; padding: 15px; margin-top: 10px; background-color: var(--neon-green); color: #000; border: none; 
            border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 800; text-transform: uppercase; 
            transition: all 0.3s ease;
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 230, 64, 0.4); }
        button:disabled { background-color: #444; color: #888; cursor: not-allowed; transform: none; box-shadow: none; }

        .forgot-password {
            display: block;
            margin-top: 12px;
            color: #888;
            text-decoration: none;
            font-size: 13px;
            transition: 0.3s;
        }
        .forgot-password:hover { color: var(--neon-green); }

        .links { margin-top: 30px; padding-top: 20px; border-top: 1px solid #333; font-size: 14px; color: #aaa; }
        
        .btn-criar-conta {
            color: var(--neon-green); text-decoration: none; font-weight: bold; 
            border: 1px solid var(--neon-green); padding: 10px 20px; border-radius: 25px;
            display: inline-block; margin-top: 12px; transition: 0.3s;
        }
        .btn-criar-conta:hover { background-color: var(--neon-green); color: black; }

        /* MODAL PERSONALIZADO */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-box {
            background: var(--card-color); padding: 30px; border-radius: 15px; 
            width: 85%; max-width: 320px; text-align: center; border: 1px solid var(--border-color);
            animation: popIn 0.3s ease;
        }
        @keyframes popIn { from{transform: scale(0.8); opacity:0;} to{transform: scale(1); opacity:1;} }
        .modal-icone { font-size: 40px; margin-bottom: 15px; display: block; }
        .modal-titulo { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: white; text-transform: uppercase;}
        .modal-msg { font-size: 14px; color: #ccc; margin-bottom: 20px; line-height: 1.5; }
        .btn-modal { width: 100%; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; }
        .btn-fechar-erro { background: #333; color: var(--danger-color); border: 1px solid var(--danger-color); }
        .btn-fechar-erro:hover { background: var(--danger-color); color: white; }
    </style>
    </head>
<body>

    <div id="modal-aviso" class="modal-overlay">
        <div class="modal-box" id="box-aviso">
            <span class="modal-icone" id="icone-aviso">‚ö†Ô∏è</span>
            <div class="modal-titulo" id="titulo-aviso">ATEN√á√ÉO</div>
            <div class="modal-msg" id="msg-aviso">Mensagem de erro aqui.</div>
            <button class="btn-modal btn-fechar-erro" onclick="fecharModal()">FECHAR</button>
        </div>
    </div>

    <div class="login-container">
        <div class="logo-area">
            <img src="assets/logo.png" alt="Logo Falc√µes">
        </div>
        
        <h2>Acessar Conta</h2>
        
        <div class="input-group">
            <i class="fas fa-envelope"></i>
            <input type="email" id="email" placeholder="Seu E-mail">
        </div>

        <div class="input-group">
            <i class="fas fa-lock"></i>
            <input type="password" id="senha" placeholder="Sua Senha">
            <i class="fas fa-eye toggle-password" onclick="togglePassword()"></i>
        </div>
        
        <button id="btn-entrar" onclick="fazerLogin()">ENTRAR</button>
        
        <a href="#" class="forgot-password" onclick="mostrarAviso('RECUPERA√á√ÉO', 'A fun√ß√£o de recuperar senha ser√° implementada em breve. Entre em contato com o suporte.', 'aviso')">Esqueceu sua senha?</a>

        <div class="links">
            <p>N√£o tem uma conta?</p>
            <a href="cadastro.html" class="btn-criar-conta">CRIAR CONTA NOVA</a>
        </div>
    </div>

    <script>
        // Fun√ß√£o para Mostrar/Esconder Senha
        function togglePassword() {
            const senhaInput = document.getElementById('senha');
            const icon = document.querySelector('.toggle-password');
            if (senhaInput.type === 'password') {
                senhaInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                senhaInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        function mostrarAviso(titulo, mensagem, tipo) {
            const modal = document.getElementById('modal-aviso');
            const box = document.getElementById('box-aviso');
            const icone = document.getElementById('icone-aviso');
            const txtTitulo = document.getElementById('titulo-aviso');
            
            document.getElementById('msg-aviso').innerText = mensagem;
            txtTitulo.innerText = titulo;

            if (tipo === 'erro') {
                box.style.borderColor = 'var(--danger-color)';
                txtTitulo.style.color = 'var(--danger-color)';
                icone.innerText = 'üö´';
            } else {
                box.style.borderColor = 'var(--warning-color)';
                txtTitulo.style.color = 'var(--warning-color)';
                icone.innerText = '‚è≥';
            }
            modal.style.display = 'flex';
        }

        function fecharModal() {
            document.getElementById('modal-aviso').style.display = 'none';
        }

        async function fazerLogin() {
            const email = document.getElementById('email').value;
            const senha = document.getElementById('senha').value;
            const btn = document.getElementById('btn-entrar');

            if(!email || !senha) return mostrarAviso("CAMPO VAZIO", "Por favor, preencha seu e-mail e senha.", "erro");

            const textoOriginal = btn.innerText;
            btn.innerText = "VERIFICANDO...";
            btn.disabled = true;

            try {
                const response = await fetch('https://falcoes-app.onrender.com/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, senha })
                });

                const data = await response.json();

                if (data.success) {
    // Salva os dados para uso posterior
    localStorage.setItem('usuario', JSON.stringify(data.user));
    localStorage.setItem('usuario_id', data.user.id);

    // Converte para min√∫sculo para evitar erros de digita√ß√£o no banco
    const tipo = data.user.tipo.toLowerCase();

    if (tipo === 'motoboy') {
        window.location.href = 'motoboy.html';
    } else if (tipo === 'admin') {
        window.location.href = 'admin.html';
    } else if (tipo === 'empresa') {
        window.location.href = 'empresa.html'; // <--- AGORA VAI PARA O ARQUIVO NOVO!
    } else {
        window.location.href = 'cliente.html';
    }
} else {
                    const tipo = data.message.includes('an√°lise') ? 'aviso' : 'erro';
                    const titulo = data.message.includes('an√°lise') ? 'CONTA EM AN√ÅLISE' : 'ERRO DE ACESSO';
                    mostrarAviso(titulo, data.message, tipo);
                    btn.innerText = textoOriginal;
                    btn.disabled = false;
                }
            } catch (error) {
                mostrarAviso("ERRO DE CONEX√ÉO", "N√£o foi poss√≠vel conectar ao servidor.", "erro");
                btn.innerText = textoOriginal;
                btn.disabled = false;
            }
        }
        
    </script>
</body>
</html>